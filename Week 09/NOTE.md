学习笔记

### HTML解析（把response.body解析成dom)

#### 第一步
- 为了方便文件管理，把parser单独拆分文件
- parser接受HTML文本作为参数，返回dom树
#### 第二步

- 使用FSM 状态机来实现HTML的分析
- 在HTML标准中，已经规定了其状态
- toy-browser只挑选了一部分状态，完成最简单版本

#### 第三步 解析标签

- 三种标签
    - 开始
    - 结束
    - 自封闭
- 暂时忽略属性

#### 第四步 创建元素 
- 在状态机中，除了状态迁移，还可以加入业务逻辑
- 标签结束状态才提交标签token

#### 第五步 处理属性

    - \t 制表符
    - \n 回车换行   回去\r
    - \f 换页
    - \u0000 空白字符 并不是空格

- 属性值分为单引号 双引号 无引号
- 处理属性的方式跟标签类似
- 属性结束时，我们把属性加到标签Token上

#### 第六步 token构建DOM树  由词法到语法  先不处理文本节点

这块代码写在emit里面

-  基本技巧，就是使用栈
- 创建标签入栈 结束标签出栈
- 自封闭可视为放栈立刻出栈
- 任何元素的父元素都是它入栈前的栈顶

#### 第七步 处理token的文本节点

- 文本节点与自封闭标签处理是类似的
- 外个文本节点需要合并

### CSS computing 计算css


#### 第一步 收集css规则

parser代码中， 在发现结束标签的时候，如果标签名是style 则把content添加进规则中，npm 安装 css 包解析css.parser ast树

- 



